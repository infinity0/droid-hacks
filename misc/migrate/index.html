<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Migrating app data to a new phone | Android FOSS+H hacks</title>
<link href="../../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/html4css1.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_rst.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/theme.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="https://infinity0.github.io/droid-hacks/misc/migrate/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Ximin Luo">
<meta property="og:site_name" content="Android FOSS+H hacks">
<meta property="og:title" content="Migrating app data to a new phone">
<meta property="og:url" content="https://infinity0.github.io/droid-hacks/misc/migrate/">
<meta property="og:description" content="The below guide was originally written for the Signal Messenger app, and I
haven't had time to generalise it to other apps yet. However I have personally
adapted them to successfully migrate my own da">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2018-12-05T00:00:00Z">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://infinity0.github.io/droid-hacks/">

                <span id="blog-title">Android FOSS+H hacks</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" role="navigation" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../listings/">Code</a>
                </li>
<li>
<a href="../../categories/">Tags</a>
                </li>
<li>
<a href="../../rss.xml">RSS feed</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
    <a href="index.rst" id="sourcelink">Source</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text storypage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Migrating app data to a new phone</a></h1>

        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>The below guide was originally written for the Signal Messenger app, and I
haven't had time to generalise it to other apps yet. However I have personally
adapted them to successfully migrate my own data across phones.</p>
<p>In newer versions of Signal (4.16+) they decided to put user private keys in a
special place in the system (Android KeyStore) that "keeps it safe from
hackers" but unfortunately is totally untransparent to end-users, and can't be
easily backed-up even when you figure out what's going on. So the instructions
below won't actually work for Signal today. However, they can be adapted to
e.g. Silence, or pretty much any other app that doesn't use the KeyStore.</p>
<ol class="arabic" start="0">
<li>
<p class="first">Download <a class="reference external" href="../../listings/restore-apk-data.sh.html">../../listings/restore-apk-data.sh.html</a>, have a read through
it and understand what it does. Then push it to your new phone:</p>
<pre class="literal-block">
$ adb root
$ adb shell mkdir -p /data/user/0/restore
$ adb push restore-apk-data.sh /data/user/0/restore/ # the slash is important
</pre>
</li>
<li>
<p class="first">On both phones, enable ADB. If you can't, then <a class="reference external" href="../force-adb/">try this</a>.</p>
</li>
<li>
<p class="first">On your new phone, install Signal (or <a class="reference external" href="#new-way">LibreSignal</a>), start it
once, then go to Settings / Apps / Signal then press "Force Stop".</p>
</li>
<li>
<p class="first">On your old phone, go to Settings / Apps / Signal then press "Force Stop".
Then, <strong>put your old phone in Airplane Mode</strong>.</p>
</li>
<li>
<p class="first">Connect your old phone to your computer, then on the latter:</p>
<pre class="literal-block">
$ adb root
$ adb shell tar -C /data/user/0 -czf /data/user/0/signal.tar.gz org.thoughtcrime.securesms
$ adb pull /data/user/0/signal.tar.gz
$ adb shell rm /data/user/0/signal.tar.gz
</pre>
</li>
<li>
<p class="first">Disconnect your old phone from your computer.</p>
</li>
<li>
<p class="first">Connect your new phone to your computer, then on the latter:</p>
<pre class="literal-block">
$ adb root
$ adb push signal.tar.gz /data/user/0/restore/ # the slash is important
$ adb shell "cd /data/user/0/restore/ &amp;&amp; tar -xzf signal.tar.gz"
$ adb shell "cd /data/user/0/restore/ &amp;&amp; ./restore-apk-data.sh org.thoughtcrime.securesms"
</pre>
</li>
<li>
<p class="first">Start Signal on your new phone, and check that everything still works. If it
does, you can run:</p>
<pre class="literal-block">
$ adb shell rm -rf /data/user/0/_old_signal
$ adb shell rm /data/user/0/signal.tar.gz
</pre>
<p>Or you can leave this until later, as a backup.</p>
</li>
<li>
<p class="first">Disconnect your new phone from your computer.</p>
</li>
<li>
<p class="first">On your old phone, uninstall Signal <strong>before</strong> disabling Airplane Mode. If
you don't do this, <em>both</em> of your installations will start to break as the
cryptographic ratchet gets forked.</p>
</li>
</ol>
</div>
    </div>
    

</article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents Â© 2019         <a href="mailto:infinity0@pwned.gg">Ximin Luo</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


            <script src="../../assets/js/jquery.min.js"></script><script src="../../assets/js/bootstrap.min.js"></script><script src="../../assets/js/moment-with-locales.min.js"></script><script src="../../assets/js/fancydates.js"></script><script src="../../assets/js/jquery.colorbox-min.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
