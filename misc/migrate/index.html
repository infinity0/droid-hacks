<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Migrating app data to a new phone | Android FOSS+H hacks</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="https://infinity0.github.io/droid-hacks/misc/migrate/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Ximin Luo">
<meta property="og:site_name" content="Android FOSS+H hacks">
<meta property="og:title" content="Migrating app data to a new phone">
<meta property="og:url" content="https://infinity0.github.io/droid-hacks/misc/migrate/">
<meta property="og:description" content="The below guide was originally written for the Signal Messenger app, and I
haven't had time to generalise it to other apps yet. However I have personally
adapted them to successfully migrate my own da">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2018-12-05T00:00:00Z">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Header and menu bar -->
<div class="container">
      <header class="blog-header py-3"><div class="row nbb-header align-items-center">
          <div class="col-md-3 col-xs-2 col-sm-2" style="width: auto;">
            <button class="navbar-toggler navbar-light bg-light nbb-navbar-toggler" type="button" data-toggle="collapse" data-target=".bs-nav-collapsible" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse bs-nav-collapsible bootblog4-search-form-holder">
                
            </div>
        </div>
          <div class="col-md-6 col-xs-10 col-sm-10 bootblog4-brand" style="width: auto;">
            <a class="navbar-brand blog-header-logo text-dark" href="https://infinity0.github.io/droid-hacks/">

            <span id="blog-title">Android FOSS+H hacks</span>
        </a>
          </div>
            <div class="col-md-3 justify-content-end align-items-center bs-nav-collapsible collapse flex-collapse bootblog4-right-nav">
            <nav class="navbar navbar-light bg-white"><ul class="navbar-nav bootblog4-right-nav">
<li class="nav-item">
    <a href="index.rst" id="sourcelink" class="nav-link">Source</a>
    </li>


                    
            </ul></nav>
</div>
    </div>
</header><nav class="navbar navbar-expand-md navbar-light bg-white static-top"><div class="collapse navbar-collapse bs-nav-collapsible" id="bs-navbar">
            <ul class="navbar-nav nav-fill d-flex w-100">
<li class="nav-item">
<a href="../../archive.html" class="nav-link">Archive</a>
                </li>
<li class="nav-item">
<a href="../../listings/" class="nav-link">Code</a>
                </li>
<li class="nav-item">
<a href="../../categories/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="../../rss.xml" class="nav-link">RSS feed</a>

                
            </li>
</ul>
</div>
<!-- /.navbar-collapse -->
</nav>
</div>

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
<article class="post-text storypage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Migrating app data to a new phone</a></h1>

        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>The below guide was originally written for the Signal Messenger app, and I
haven't had time to generalise it to other apps yet. However I have personally
adapted them to successfully migrate my own data across phones.</p>
<p>In newer versions of Signal (4.16+) they decided to put user private keys in a
special place in the system (Android KeyStore) that "keeps it safe from
hackers" but unfortunately is totally untransparent to end-users, and can't be
easily backed-up even when you figure out what's going on. So the instructions
below won't actually work for Signal today. However, they can be adapted to
e.g. Silence, or pretty much any other app that doesn't use the KeyStore.</p>
<ol class="arabic">
<li>
<p class="first">On both phones, enable ADB. If you can't, then <a class="reference external" href="../force-adb/">try this</a>.</p>
</li>
<li>
<p class="first">On your new phone, install Signal (or <a class="reference external" href="#new-way">LibreSignal</a>), start it once, then go
to Settings / Apps / Signal then press "Force Stop".</p>
</li>
<li>
<p class="first">Connect your old phone to your computer, then on the latter:</p>
<pre class="literal-block">
$ adb root
$ adb shell tar -C /data/user/0 -czf /data/user/0/signal.tar.gz org.thoughtcrime.securesms
$ adb pull /data/user/0/signal.tar.gz
$ adb shell rm /data/user/0/signal.tar.gz
</pre>
</li>
<li>
<p class="first">Disconnect your old phone, and <strong>put it in Airplane Mode</strong>.</p>
</li>
<li>
<p class="first">Connect your new phone to your computer, then on the latter:</p>
<pre class="literal-block">
$ adb root
$ adb push signal.tar.gz /data/user/0/  # the slash is important
$ adb shell
  # cd /data/user/0
  # package=org.thoughtcrime.securesms
  # mv "$package" _old_signal
  # tar -xzf signal.tar.gz
  # chmod 771 "$package"
  # chown -R "$(stat -c %u:%g _old_signal                    )" "$package"
  # chcon -R "$(ls -Zd        _old_signal     | cut '-d ' -f1)" "$package"
  # ln -snf  "$(readlink      _old_signal/lib                )" "$package"/lib
  # chown -h "$(stat -c %u:%g _old_signal/lib                )" "$package"/lib
  # chcon -h "$(ls -Zd        _old_signal/lib | cut '-d ' -f1)" "$package"/lib
  # chmod 751 "$package"
</pre>
</li>
<li>
<p class="first">Start Signal on your new phone, and check that everything still works. If it
does, you can run:</p>
<pre class="literal-block">
$ adb shell rm -rf /data/user/0/_old_signal
$ adb shell rm /data/user/0/signal.tar.gz
</pre>
<p>Or you can leave this until later, as a backup.</p>
</li>
<li>
<p class="first">Disconnect your new phone. Uninstall Signal from your old phone <strong>before</strong>
disabling Airplane Mode. If you don't do this, <em>both</em> of your installations
will start to break as the cryptographic ratchet gets forked.</p>
</li>
</ol>
</div>
    </div>
    

</article><!--End of body content--><footer id="footer">
            Contents Â© 2018         <a href="mailto:infinity0@pwned.gg">Ximin Luo</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


        <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
